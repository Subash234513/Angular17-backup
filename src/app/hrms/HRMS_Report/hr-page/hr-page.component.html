<!-- <div>
    <nav>
        <div class="nav nav-tabs">
            <span class="nav-item nav-link" data-bs-toggle="tab" (click)="subModuleData(sub)" role="tab"
                *ngFor="let sub of hrObjects.HR_Menu_List;index as i">
                {{sub.name}}
            </span>
        </div>
    </nav>
</div>     -->

<div class="widthset">
    <div class="leftalign">
        <form [formGroup]="searchEmployeeLeaveBalanceForm">
            <!-- <div class="row">
                <div class="col">  
                    <mat-label> Month </mat-label><br>
                    <mat-form-field appMonthYearFormat>
                        <input matInput [matDatepicker]="dp" [formControl]="monyear" placeholder="Month and Year"
                            formControlName="data">
                        <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                        <mat-datepicker #dp startView="multi-year" (yearSelected)="chosenYearHandler($event)"
                            (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                        </mat-datepicker>
                    </mat-form-field>
                    <button mat-stroked-button type="button" style="margin-left: 20px;background-color: white;"
                        aria-label="Search" (click)="leaveBalanceSearch('next')">
                        <mat-icon>search</mat-icon>
                    </button>
                </div>
            </div> -->


            <table>
                <tr>
                    <td>
    
                        <mat-form-field  (click)="getTeamLead('')"  >
                            <mat-label>Team Lead</mat-label>
    
                            <input #teamldInput class="matformfieldinputstyle" matInput
                                (keyup)="getTeamLead(searchEmployeeLeaveBalanceForm.value.lead_id)" formControlName="lead_id"
                                [matAutocomplete]="teamld">
                            <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon>
                            <mat-autocomplete #teamld="matAutocomplete" [displayWith]="displayFnteamld">
                                <mat-option *ngFor="let teamld of hrObjects.teamldList" [value]="teamld">
                                    {{teamld.name}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td>
                    <td>
                        <mat-form-field class="marginleftField">
                            <input class="matformfieldinputstyle" type="text" matInput autocomplete="off"
                                placeholder="Code/Name" formControlName="emp">
                        </mat-form-field>
                    </td>    

                    <td>

                        <mat-form-field (click)="getorg_id('')" class="marginleftField">
                            <mat-label> Deployed Site </mat-label>
                            <input #org_idInput placeholder="Select Deployed Site" matInput formControlName="org_id"
                                [matAutocomplete]="org_id" (keyup)="getorg_id(searchEmployeeLeaveBalanceForm.value.org_id)">
                            <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon>
                            <mat-autocomplete #org_id="matAutocomplete" [displayWith]="displayFnorg_id">
                                <mat-option *ngFor="let org_id of hrObjects.org_idList" [value]="org_id"
                                    title="{{org_id.name}}">{{org_id.name}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td> 
                    <td>
                        <mat-form-field appMonthYearFormat class="marginleftField" >
                            <input matInput [matDatepicker]="dp" [formControl]="monyear" placeholder="Month and Year"
                                formControlName="data">
                            <mat-datepicker-toggle matSuffix [for]="dp"></mat-datepicker-toggle>
                            <mat-datepicker #dp startView="multi-year" (yearSelected)="chosenYearHandler($event)"
                                (monthSelected)="chosenMonthHandler($event, dp)" panelClass="example-month-picker">
                            </mat-datepicker>
                        </mat-form-field>
                        
                    </td>  
                </tr>
                <tr>
                    <td>
    
                        <mat-form-field (click)="getbsdata('')" >
                            <mat-label> BS </mat-label>
                            <input #bsInput placeholder="Select BS" matInput formControlName="bs"
                                [matAutocomplete]="bs_id" (keyup)="getbsdata(searchEmployeeLeaveBalanceForm.value.bs)">
                            <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon>
                            <mat-autocomplete #bs_id="matAutocomplete" [displayWith]="displayFnbs_id">
                                <mat-option *ngFor="let bs_id of hrObjects.bsdatalist" [value]="bs_id"
                                    title="{{bs_id.name}}">{{bs_id.name}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td>
                    <td>
    
                        <mat-form-field (click)="getccdata('')" class="marginleftField"   >
                            <mat-label> CC </mat-label>
                            <input #CC_idInput placeholder="Select CC" matInput formControlName="cc"
                                [matAutocomplete]="cc_id" (keyup)="getccdata(searchEmployeeLeaveBalanceForm.value.cc)">
                            <mat-icon matSuffix class="maticonsize">unfold_more</mat-icon>
                            <mat-autocomplete #cc_id="matAutocomplete" [displayWith]="displayFncc">
                                <mat-option *ngFor="let cc of hrObjects.ccdatalist" [value]="cc"
                                    title="{{cc.name}}">{{cc.name}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </td>
                    <td>
                        <button mat-stroked-button type="button" id="WhiteBtn" class="bottomSpace"
                            aria-label="Search" (click)="leaveBalanceSearch('')">
                            <mat-icon>search</mat-icon>
                        </button>
                        <button mat-stroked-button type="button" id="WhiteBtn" class="bottomSpace"
                            aria-label="Search" (click)="resetLeaveBalance()">
                            Reset
                        </button>
                        <button mat-stroked-button type="button" style="margin-left: 20px;background-color: white;"
                        aria-label="Search" (click)="Report()" title="Download Leave Balance Report">
                        <span class="material-icons">download</span>
                    </button>
                    </td>
                </tr>   
            </table>

        </form>
    </div>
    <div class="table-responsive tableFixHeaddiv">
        <table class="table table-bordered outertable" style="margin-top: 10px;max-width: 100%;" id='commonstyle'>
            <thead class="table_header">
                <tr class="leaveHeader">
                    <!-- <th rowspan="2">Sl.No</th> -->
                    <th rowspan="2" class="firstone">Employee</th>
                    <th colspan="6">Opening Balance</th>
                    <th colspan="6">Earn leave</th>
                    <th colspan="6">Available Leave</th>
                    <th colspan="6">Utilized Leave</th>
                    <th colspan="3">Loss Of Pay</th>
                    <th colspan="6">Closing Balance</th>
                    <th rowspan="2">Present Days</th>
                    <th rowspan="2">Paid Days</th>
                </tr>

                <tr>

                    <th>ML</th>
                    <th>CL</th>
                    <th>PL</th>
                    <th>Comp Off</th>
                    <th>OD</th>
                    <th>Total</th>
                    <!-- </tr>
            <tr> -->
                    <th>ML</th>
                    <th>CL</th>
                    <th>PL</th>
                    <th>Comp Off</th>
                    <th>OD</th>
                    <th>Total</th>
                    <!-- </tr>
            <tr> -->
                    <th>ML</th>
                    <th>CL</th>
                    <th>PL</th>
                    <th>Comp Off</th>
                    <th>OD</th>
                    <th>Total</th>
                    <!-- </tr>
            <tr> -->
                    <th>ML</th>
                    <th>CL</th>
                    <th>PL</th>
                    <th>Comp Off</th>
                    <th>OD</th>
                    <th>Total</th>

                    <th title="Planned LOP">P LOP</th>
                    <th title="Un Planned LOP">UP LOP</th>
                    <th>Total</th>

                    <th>ML</th>
                    <th>CL</th>
                    <th>PL</th>
                    <th>Comp Off</th>
                    <th>OD</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let data of hrObjects?.leaveBalanceList; let index = index">


                    <td class="nowrap">{{index + 1}}. ({{data?.code}}) {{data?.name}}</td>

                    <td>{{data['Opening balance']['ML']}}</td>
                    <td>{{data['Opening balance']['CL']}}</td>
                    <td>{{data['Opening balance']['PL']}}</td>
                    <td>{{data['Opening balance']['COMP-OFF']}}</td>
                    <td class="OD_Color">{{data['Opening balance']['OD']}}</td>
                    <td>{{data['Opening balance']['TOL']}}</td>

                    <td>{{data['Earn Leave']['ML']}}</td>
                    <td>{{data['Earn Leave']['CL']}}</td>
                    <td>{{data['Earn Leave']['PL']}}</td>
                    <td>{{data['Earn Leave']['COMP-OFF']}}</td>
                    <td class="OD_Color">{{data['Earn Leave']['OD']}}</td>
                    <td class="bgsetColumn">{{data['Earn Leave']['TOL']}}</td>

                    <td>{{data['available Leave']['ML']}}</td>
                    <td>{{data['available Leave']['CL']}}</td>
                    <td>{{data['available Leave']['PL']}}</td>
                    <td>{{data['available Leave']['COMP-OFF']}}</td>
                    <td class="OD_Color">{{data['available Leave']['OD']}}</td>
                    <td>{{data['available Leave']['TOL']}}</td>

                    <td>{{data['Utilized Leave']['ML']}}</td>
                    <td>{{data['Utilized Leave']['CL']}}</td>
                    <td>{{data['Utilized Leave']['PL']}}</td>
                    <td>{{data['Utilized Leave']['COMP-OFF']}}</td>
                    <td class="OD_Color">{{data['Utilized Leave']['OD']}}</td>
                    <td>{{data['Utilized Leave']['TOL']}}</td>

                    <td>{{data['LOP']['PLOP']}}</td>
                    <td>{{data['LOP']['UPLOP']}}</td>
                    <td>{{data['LOP']['TOL']}}</td>

                    <td>{{data['Closed Leave']['ML']}}</td>
                    <td>{{data['Closed Leave']['CL']}}</td>
                    <td>{{data['Closed Leave']['PL']}}</td>
                    <td>{{data['Closed Leave']['COMP-OFF']}}</td>
                    <td class="OD_Color">{{data['Closed Leave']['OD']}}</td>
                    <td>{{data['Closed Leave']['TOL']}}</td>

                    <td>{{data?.present_count}}</td>
                    <td>{{data?.paid_days}}</td>


                </tr>

            </tbody>
        </table>





    </div>

    <div *ngIf="hrObjects?.leaveBalanceList?.length==0 || hrObjects?.leaveBalanceList == undefined; else paginationhrReport"
        class="NodataAlign text-center">No Records Found...</div>
    <ng-template #paginationhrReport>
        <div class="col-sm-12" style="font-size: small;text-align: right;margin-bottom: 5%;">


            <button type="button" mat-raised-button [disabled]="hrObjects.nextpageLeaveBalance === false"
                color="primary" (click)="leaveBalanceSearch('next')">
                Load More
            </button>

        </div>
    </ng-template>


</div>